{"is_source_file": true, "format": "Python (SQLAlchemy ORM models)", "description": "This file defines database models for a music streaming service, including Users, Tracks, Playlists, RecommendationEvents, and StreamSessions, with associated relationships and tables.", "external_files": ["sqlalchemy", "sqlalchemy.orm"], "external_methods": ["datetime.utcnow"], "published": ["User", "Track", "Playlist", "RecommendationEvent", "StreamSession", "playlist_tracks_table"], "classes": [{"name": "User", "description": "Represents a user in the music streaming service with personal details and relationship to playlists."}, {"name": "Track", "description": "Represents a music track with details such as title, artist, album, genre, duration, and cover image."}, {"name": "Playlist", "description": "Represents a user-created playlist consisting of tracks, with metadata and ownership details."}, {"name": "RecommendationEvent", "description": "Logs user interactions with tracks for recommendation purposes, like 'play' or 'like'."}, {"name": "StreamSession", "description": "Tracks streaming sessions of users listening to tracks, including start and end times."}], "methods": [{"name": "bool is_active(self)", "description": "Determines if a streaming session is currently active based on its start and end times.", "scope": "StreamSession", "scopeKind": "class"}], "calls": ["datetime.utcnow", "relationship", "mapped_column"], "search-terms": ["SQLAlchemy models", "playlist tracks association table", "music streaming database models", "user playlists ORM", "stream session tracking"], "state": 2, "file_id": 42, "knowledge_revision": 109, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^class Playlist(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RecommendationEvent", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^class RecommendationEvent(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StreamSession", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^class StreamSession(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Track", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^class Track(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    __tablename__ = \"playlists\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    __tablename__ = \"recommendation_events\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    __tablename__ = \"stream_sessions\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    __tablename__ = \"tracks\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "album", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    album: Mapped[Optional[str]] = mapped_column(String(255), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "artist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    artist: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "cover_image", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    cover_image: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "cover_image", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    cover_image: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, nullable=Fal/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, nullable=Fal/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, nullable=Fal/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, nullable=Fal/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    description: Mapped[Optional[str]] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "duration", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    duration: Mapped[Optional[float]] = mapped_column(Float, nullable=True)  # seconds$/", "language": "Python", "typeref": "typename:Mapped[Optional[float]]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(255), unique=True, index=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "ended_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    ended_at: Mapped[Optional[datetime]] = mapped_column(DateTime, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[datetime]]", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "event_type", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    event_type: Mapped[str] = mapped_column(String(64), nullable=False)  # e.g., \"play\", \"like\"$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "genre", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    genre: Mapped[Optional[str]] = mapped_column(String(64), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    def is_active(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "is_admin", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    is_admin: Mapped[bool] = mapped_column(Boolean, default=False, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    name: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "owner", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    owner: Mapped[\"User\"] = relationship(\"User\", back_populates=\"playlists\")$/", "language": "Python", "typeref": "typename:Mapped[\"User\"]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "owner_id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    owner_id: Mapped[int] = mapped_column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"), n/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    password_hash: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "playlist_tracks_table", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^playlist_tracks_table = Table($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "playlists", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    playlists: Mapped[list[\"Playlist\"]] = relationship(\"Playlist\", back_populates=\"owner\", casca/", "language": "Python", "typeref": "typename:Mapped[list[\"Playlist\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "started_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    started_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, nullable=Fal/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    title: Mapped[str] = mapped_column(String(255), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Track", "scopeKind": "class"}, {"_type": "tag", "name": "track_id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    track_id: Mapped[int] = mapped_column(Integer, ForeignKey(\"tracks.id\", ondelete=\"SET NULL\"))$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "track_id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    track_id: Mapped[int] = mapped_column(Integer, ForeignKey(\"tracks.id\", ondelete=\"SET NULL\"))$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "tracks", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    tracks: Mapped[list[\"Track\"]] = relationship(\"Track\", secondary=playlist_tracks_table, lazy=/", "language": "Python", "typeref": "typename:Mapped[list[\"Track\"]]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column(DateTime, default=datetime.utcnow, onupdate=dat/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "Playlist", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    user_id: Mapped[int] = mapped_column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"))$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RecommendationEvent", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    user_id: Mapped[int] = mapped_column(Integer, ForeignKey(\"users.id\", ondelete=\"CASCADE\"))$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "StreamSession", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22054/BackendAPI/app/db/models.py", "pattern": "/^    username: Mapped[str] = mapped_column(String(64), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}], "hash": "efdbb6717099891ed1c51afebdefe5d6", "format-version": 4, "code-base-name": "WebFrontend", "filename": "BackendAPI/app/db/models.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"playlists\"", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"recommendation_events\"", "scope": "RecommendationEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"stream_sessions\"", "scope": "StreamSession", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"tracks\"", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] album", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] artist", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] cover_image", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] description", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[float]] duration", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[datetime]] ended_at", "scope": "StreamSession", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] event_type", "scope": "RecommendationEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] genre", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_admin", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] name", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[\"User\"] owner", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] owner_id", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] password_hash", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "playlist_tracks_table = Table(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[list[\"Playlist\"]] playlists", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] started_at", "scope": "StreamSession", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] title", "scope": "Track", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] track_id", "scope": "RecommendationEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[list[\"Track\"]] tracks", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] updated_at", "scope": "Playlist", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] user_id", "scope": "RecommendationEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] username", "scope": "User", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"109": ""}]}